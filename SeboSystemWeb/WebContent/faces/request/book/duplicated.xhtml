<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:o="http://xmlns.jcp.org/jsf/passthrough"
>
    <ui:param name="editable" value="#{editable ? true : false}"></ui:param>
    <h:panelGroup class="form-group" layout="block">
        <h:outputLabel value="#{messages.request_duplicated_book}:" styleClass="col-sm-2 control-label" />
        <div class="col-sm-9">
            <p class="form-control-static">
                <h:link value="#{requestControlBean.model.book.title} " outcome="pretty:book_view" target="_blank">
                    <f:param name="oid" value="#{requestControlBean.model.book.oid}" />
                    <h:outputText styleClass="glyphicon glyphicon-new-window" />
                </h:link>
            </p>
        </div>
    </h:panelGroup>
    <h4 class="sub-title">
        <h:outputText value="#{messages.request_related_duplicated_books}:" />
    </h4>
    <h:panelGroup styleClass="table-responsive col-xs-12" layout="block" id="tableContainer">
        <h:outputText value="#{messages.no_related_books}" styleClass="empty-list-message" rendered="#{empty requestControlBean.model.relatedBooks}" />
        <h:dataTable id="tableBookList" styleClass="table striped-table table-hover table-condensed"
            rendered="#{!empty requestControlBean.model.relatedBooks}" value="#{requestControlBean.model.relatedBooks}" var="book"
        >
            <h:column>
                <h:outputText value="#{book.oid}">
                    <f:convertNumber type="number" />
                </h:outputText>
            </h:column>
            <h:column>
                <h:link value="#{book.title} " outcome="pretty:book_view" target="_blank">
                    <f:param name="oid" value="#{book.oid}" />
                    <h:outputText styleClass="glyphicon glyphicon-new-window" />
                </h:link>
            </h:column>
            <h:column rendered="#{editable}">
                <h:panelGroup styleClass="btn-group right btn-group-actions" layout="block">
                    <h:commandLink id="btRemoveBook" styleClass="glyphicon glyphicon-trash btn btn-xs btn-alert">
                        <f:setPropertyActionListener target="#{requestControlBean.selectedBook}" value="#{book}" />
                        <f:ajax render=":requestBookRemoveModal" onevent="function(e){app.openModalOnSuccess(e, 'requestBookRemoveModal')}" />
                        <h:outputText value="#{messages.remove}" styleClass="sr-only" />
                    </h:commandLink>
                </h:panelGroup>
            </h:column>
        </h:dataTable>
        <h:commandLink id="btnAddBook" styleClass="btn btn-primary info-text" rendered="#{editable}">
            <f:setPropertyActionListener target="#{requestControlBean.selectedBook}" value="#{null}" />
            <f:ajax render=":bookSelectModal" onevent="function(e){app.openModalOnSuccess(e, 'bookSelectModal')}" />
            <i class="glyphicon glyphicon-plus"></i>
            <h:outputText value="#{messages.add_book}" />
        </h:commandLink>
        <h:commandLink id="btRemoveBook" styleClass="glyphicon glyphicon-trash btn btn-xs btn-alert" rendered="#{editable}">
            <f:setPropertyActionListener target="#{requestControlBean.selectedBook}" value="#{requestControlBean.model.book}" />
            <f:ajax render=":requestBookRemoveModal" onevent="function(e){app.openModalOnSuccess(e, 'requestBookRemoveModal')}" />
            <h:outputText value="#{messages.remove}" styleClass="sr-only" />
        </h:commandLink>
    </h:panelGroup>
</ui:composition>