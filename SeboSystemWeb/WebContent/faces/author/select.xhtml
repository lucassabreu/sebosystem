<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:o="http://xmlns.jcp.org/jsf/passthrough" xmlns:c="http://java.sun.com/jsp/jstl/core"
>
    <h:panelGroup styleClass="modal fade modal-remove" id="selectAuthorModal" layout="block" o:role="dialog" o:aria-labelledby="myModalLabel" o:aria-hidden="true">
        <h:panelGroup layout="block" class="modal-dialog">
            <h:form id="formSelectAuthor" o:role="form" styleClass="modal-content">
                <h:panelGroup layout="block" class="modal-header">
                    <h:link styleClass="close" o:data-dismiss="modal">
                        <h:outputText o:aria-hidden="true" value="&#215;" />
                        <h:outputText styleClass="sr-only" value="Close" />
                    </h:link>
                    <h4 class="modal-title" id="myModalLabel">
                        <h:outputText value="#{messages.authors}" />
                    </h4>
                </h:panelGroup>
                <h:panelGroup layout="block" class="modal-body">
                    <h:panelGroup styleClass="search-box" layout="block">
                        <h:inputText id="filterName" value="#{authorControlBean.filterName}" update="author_list" styleClass="form-control"
                            o:placeholder="#{messages.author_name_placeholder}" o:pattern=".{3,100}" o:autocomplete="off" o:autofocus="true"
                        >
                            <f:ajax event="keyup" render="authorListContent" />
                        </h:inputText>
                    </h:panelGroup>
                    <h:panelGroup styleClass="row" layout="block">
                        <h:outputText value="Name: #{authorControlBean.model.name}" />
                        <h:panelGroup id="authorListContent" styleClass="table-responsive col-xs-12" layout="block">
                            <h:dataTable id="authorListTable" value="#{authorControlBean.authors}" var="author"
                                styleClass="table striped-table table-hover table-condensed table-selectable"
                            >
                                <h:column>
                                    <!-- 
                                    <h:outputText styleClass="glyphicon glyphicon-unchecked check-select-view" />
                                     -->
                                    <h:commandLink id="authorSelectCheck"
                                        styleClass="btn btn-default btn-sm glyphicon check-select-view check-select #{authorControlBean.model.oid == author.oid ? 'glyphicon-check' : 'glyphicon-unchecked'}"
                                    >
                                        <f:setPropertyActionListener target="#{authorControlBean.model}" value="#{author}" />
                                        <f:ajax event="click" execute="@form" render="@form" listener="#{authorControlBean.setAuthorOid(author.oid)}" />
                                    </h:commandLink>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{messages.author_name}" />
                                    </f:facet>
                                    <h:outputText value="#{author.name} " />
                                </h:column>
                                <h:column>
                                    <h:panelGroup styleClass="btn-group right" layout="block">
                                        <h:link id="btn_view_author" outcome="pretty:author_view" target="_blank"
                                            styleClass="glyphicon glyphicon-new-window btn btn-sm btn-default"
                                        >
                                            <f:param name="oid" value="#{author.oid}" />
                                            <h:outputText value="#{messages.detail}" styleClass="sr-only" />
                                        </h:link>
                                    </h:panelGroup>
                                </h:column>
                            </h:dataTable>
                        </h:panelGroup>
                    </h:panelGroup>
                </h:panelGroup>
                <h:panelGroup layout="block" class="modal-footer" id="dialogFooter">
                    <h:link o:data-dismiss="modal" value="#{messages.cancel_button}" styleClass="btn btn-default" onclick="return false" />
                    <h:commandLink value="#{messages.select_button}" styleClass="btn btn-primary #{authorControlBean.model.oid == 0 ? 'disabled' : ''}"
                        o:data-dismiss="modal"
                    >
                        <f:setPropertyActionListener target="#{selectProperty}" value="#{authorControlBean.model}" />
                        <f:ajax execute="@form" render="#{updateElement}" />
                    </h:commandLink>
                </h:panelGroup>
            </h:form>
        </h:panelGroup>
    </h:panelGroup>
</ui:composition>
